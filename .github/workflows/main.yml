on:
  workflow_dispatch:

jobs:
  job-one:
    if: false
    runs-on: ubuntu-latest
    steps:
      - run: echo "Done"
  job-two:
    needs: job-one
    runs-on: ubuntu-latest
    steps:
      - run: echo "Done"
  job-three:
    needs: job-one
    runs-on: ubuntu-latest
    steps:
      - run: exit 1
  job-result:
    needs: [job-two, job-three]
    runs-on: ubuntu-latest
    steps:
      - run: echo "Done"
  job-result-check:
    if: ${{ !cancelled() }}
    continue-on-error: true
    needs: [job-result]
    runs-on: ubuntu-latest
    steps:
      - run: |
          if ${{ needs.job-result.result != 'success' }}; then
            echo "Tests have failed"
            exit 1
          fi

          echo "Tests have passed"
